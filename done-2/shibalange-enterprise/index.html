<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>
      Shibalange Enterprises Limited | Move It Fast. Build It Strong.
    </title>
    <!-- Font Loading -->
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;600;800&family=Open+Sans:wght@300;400;600&family=Roboto+Mono:wght@400;700&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"
    />

    <style>
      /* CSS Design System - Smart Dynamic v2 (Vanilla CSS) */
      :root {
        /* Colors */
        --color-primary: #1e293b; /* Deep Navy/Graphite */
        --color-accent: #fbbf24; /* Amber */
        --color-background: #f8fafc; /* Soft Grey/White */
        --color-text-dark: #0f172a; /* Dark Charcoal */
        --color-text-light: #f8fafc;
        --color-success: #10b981; /* Emerald Green */
        --color-border: #e2e8f0;

        /* Typography */
        --font-heading: "Manrope", system-ui, sans-serif;
        --font-body: "Open Sans", system-ui, sans-serif;
        --font-accent: "Roboto Mono", monospace;
        --fs-h1: clamp(2.2rem, 1.8rem + 2vw, 3rem);
        --fs-h2: clamp(1.8rem, 1.4rem + 1.2vw, 2.4rem);
        --fs-h3: clamp(1.4rem, 1.2rem + 0.8vw, 1.8rem);
        --fs-base: clamp(1rem, 0.9rem + 0.3vw, 1.125rem);
        --lh-body: 1.6;

        /* Layout */
        --spacing-base: 20px;
        --max-width: 1120px;
        --section-padding: 80px 0;
        --border-radius-lg: 1rem;
        --border-radius-pill: 9999px;
      }

      /* Base Styles */
      * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
      }
      body {
        font-family: var(--font-body);
        font-size: var(--fs-base);
        color: var(--color-text-dark);
        background-color: var(--color-background);
        line-height: var(--lh-body);
        overflow-x: hidden;
      }
      h1,
      h2,
      h3 {
        font-family: var(--font-heading);
        font-weight: 800;
        color: var(--color-primary);
        line-height: 1.2;
      }
      h1 {
        font-size: var(--fs-h1);
      }
      h2 {
        font-size: var(--fs-h2);
      }
      h3 {
        font-size: var(--fs-h3);
      }
      a {
        text-decoration: none;
        color: var(--color-primary);
      }

      /* Utility Classes */
      .container {
        max-width: var(--max-width);
        margin: 0 auto;
        padding: 0 var(--spacing-base);
      }
      .section {
        padding: var(--section-padding);
      }
      .text-center {
        text-align: center;
      }
      .text-accent {
        color: var(--color-accent);
      }
      .text-primary {
        color: var(--color-primary);
      }

      /* Button Styles */
      .btn {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        padding: 0.75rem 2rem;
        border: none;
        border-radius: var(--border-radius-pill);
        font-weight: 600;
        cursor: pointer;
        transition: all 0.2s ease-out;
        text-transform: uppercase;
        font-size: 0.9rem;
      }
      .btn-primary {
        background-color: var(--color-primary);
        color: var(--color-text-light);
        box-shadow: 0 4px 15px rgba(30, 41, 59, 0.3);
      }
      .btn-secondary {
        background-color: transparent;
        color: var(--color-primary);
        border: 2px solid var(--color-primary);
      }
      .btn-primary:hover,
      .btn-secondary:hover {
        transform: translateY(-2px);
        box-shadow: 0 6px 20px rgba(30, 41, 59, 0.4);
      }

      /* Header/Nav */
      header {
        background-color: var(--color-text-light);
        border-bottom: 1px solid var(--color-border);
        position: sticky;
        top: 0;
        z-index: 100;
      }
      nav {
        display: flex;
        justify-content: space-between;
        align-items: center;
        height: 60px;
      }
      .logo {
        font-size: 1.5rem;
        font-weight: 800;
        letter-spacing: -0.5px;
      }
      .logo span {
        color: var(--color-accent);
      }

      /* Hero Section */
      #hero {
        background-color: var(--color-background);
        padding: 100px 0;
        text-align: center;
      }
      .hero-content {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: var(--spacing-base);
      }
      .hero-icon {
        font-size: 3rem;
        color: var(--color-accent);
        margin-bottom: var(--spacing-base);
      }
      .hero-actions {
        display: flex;
        gap: var(--spacing-base);
        flex-wrap: wrap;
        justify-content: center;
        margin-top: var(--spacing-base);
      }

      /* Form Card Styling (General) */
      .card {
        background-color: var(--color-text-light);
        padding: calc(2 * var(--spacing-base));
        border-radius: var(--border-radius-lg);
        border: 1px solid var(--color-border);
        box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05);
        transition: all 0.3s ease-out;
        /* Card hover for service cards */
      }
      .service-card:hover {
        box-shadow: 0 10px 25px -3px rgba(30, 41, 59, 0.1),
          0 4px 6px -2px rgba(0, 0, 0, 0.05);
        transform: translateY(-5px);
        border-left: 4px solid var(--color-accent);
      }

      /* Booking Form */
      #booking-form-section .card {
        max-width: 600px;
        margin: 40px auto;
      }
      .form-grid {
        display: grid;
        grid-template-columns: 1fr;
        gap: var(--spacing-base);
      }
      @media (min-width: 768px) {
        .form-grid {
          grid-template-columns: 1fr 1fr;
        }
        .form-grid-full {
          grid-column: 1 / span 2;
        }
      }
      .form-group {
        display: flex;
        flex-direction: column;
        gap: 8px;
      }
      .form-group label {
        font-weight: 600;
        font-size: 0.9rem;
        color: var(--color-primary);
      }
      .form-group input,
      .form-group select,
      .form-group textarea {
        padding: 12px;
        border: 1px solid var(--color-border);
        border-radius: 0.5rem;
        background-color: var(--color-background);
        transition: border-color 0.2s, box-shadow 0.2s;
        font-size: 1rem;
      }
      .form-group input:focus,
      .form-group select:focus,
      .form-group textarea:focus {
        outline: none;
        border-color: var(--color-accent);
        box-shadow: 0 0 0 3px rgba(251, 191, 36, 0.3);
      }

      /* Price Estimate */
      .price-estimate {
        margin-top: var(--spacing-base);
        padding: var(--spacing-base);
        background-color: rgba(251, 191, 36, 0.1);
        border-radius: 0.5rem;
        border-left: 5px solid var(--color-accent);
      }
      .price-tag {
        font-family: var(--font-accent);
        font-size: 1.5rem;
        font-weight: 700;
        color: var(--color-primary);
        margin-top: 5px;
      }
      .zmw-currency {
        font-size: 0.9rem;
        color: var(--color-primary);
        font-weight: 600;
      }

      /* Construction Services & Why Choose Us (Grid Layout) */
      .grid-4,
      .grid-2 {
        display: grid;
        gap: var(--spacing-base);
        margin-top: 40px;
      }
      .grid-4 {
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      }
      .grid-2 {
        grid-template-columns: 1fr;
      }
      @media (min-width: 768px) {
        .grid-2 {
          grid-template-columns: 1fr 1fr;
        }
      }
      .why-us-item {
        display: flex;
        align-items: center;
        gap: 15px;
      }
      .why-us-icon {
        font-size: 2rem;
        color: var(--color-accent);
        flex-shrink: 0;
        width: 50px;
        height: 50px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 50%;
        background-color: var(--color-primary);
        color: var(--color-text-light);
      }
      .why-us-content strong {
        display: block;
        margin-bottom: 5px;
        font-family: var(--font-heading);
        font-size: 1.1rem;
      }

      /* Contact Form */
      #contact-section .card {
        max-width: 500px;
        margin: 40px auto;
      }

      /* Footer */
      footer {
        background-color: var(--color-primary);
        color: rgba(255, 255, 255, 0.8);
        padding: 30px 0;
        font-size: 0.9rem;
        line-height: 1.5;
      }
      footer a {
        color: var(--color-accent);
        transition: color 0.2s;
      }
      footer a:hover {
        color: var(--color-text-light);
      }
      .footer-content {
        display: flex;
        flex-direction: column;
        gap: 10px;
        text-align: center;
      }
      .footer-links a {
        margin: 0 10px;
      }

      /* Modals */
      .modal-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.7);
        z-index: 200;
        display: none; /* Controlled by GSAP */
        align-items: center;
        justify-content: center;
        backdrop-filter: blur(5px);
      }
      .modal-content {
        background-color: var(--color-text-light);
        border-radius: var(--border-radius-lg);
        padding: 40px;
        width: 90%;
        max-width: 450px;
        text-align: center;
        transform: translateY(100vh); /* Initial position for slide-up */
        opacity: 0; /* Initial opacity controlled by GSAP */
      }
      .modal-icon {
        font-size: 3rem;
        color: var(--color-success);
        margin-bottom: 15px;
      }
      .modal-title {
        color: var(--color-primary);
        font-weight: 700;
        margin-bottom: 10px;
      }
      .modal-close {
        position: absolute;
        top: 10px;
        right: 15px;
        font-size: 1.5rem;
        cursor: pointer;
        color: var(--color-primary);
        transition: color 0.2s;
      }
      .modal-close:hover {
        color: var(--color-accent);
      }
      /* Payment Modal Specifics */
      .payment-modal-icon {
        font-size: 3rem;
        color: var(--color-accent);
        margin-bottom: 15px;
      }
      .payment-details {
        margin: 20px 0;
        padding: 15px;
        border: 1px dashed var(--color-border);
        background-color: var(--color-background);
        border-radius: 0.5rem;
        font-size: 0.9rem;
      }
      .payment-details p {
        display: flex;
        justify-content: space-between;
        margin-bottom: 5px;
      }
      .payment-details strong {
        font-family: var(--font-accent);
        color: var(--color-primary);
        font-size: 1.1rem;
      }
      .secure-simulation {
        background-color: var(--color-primary);
        color: var(--color-text-light);
        padding: 10px;
        border-radius: 0.5rem;
        font-size: 0.8rem;
        margin-top: 20px;
      }
    </style>
  </head>
  <body>
    <!-- GSAP and ScrollTrigger CDN -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js"></script>

    <header>
      <div class="container">
        <nav>
          <div class="logo">Shibalange<span>.</span></div>
          <div class="nav-links">
            <a href="#booking-form-section" class="btn btn-secondary"
              >Book Cargo</a
            >
          </div>
        </nav>
      </div>
    </header>

    <main>
      <!-- 🏠 Hero Section -->
      <section id="hero" class="section">
        <div class="container hero-content">
          <i class="fa-solid fa-truck-ramp-box hero-icon" id="hero-icon"></i>
          <h1 id="hero-headline">
            Move It Fast. <span class="text-accent">Build It Strong.</span>
          </h1>
          <p id="hero-subtext" style="max-width: 700px; margin-bottom: 15px">
            Shibalange Enterprises Limited simplifies freight transport and
            construction logistics across Zambia with dependable fleet and
            modern operational efficiency. Trust-driven, clean, efficient.
          </p>
          <div class="hero-actions" id="hero-ctas">
            <button
              class="btn btn-primary"
              onclick="document.getElementById('booking-form-section').scrollIntoView({behavior:'smooth'}); return false;"
            >
              Book Cargo
            </button>
            <button class="btn btn-secondary">Get a Quote</button>
          </div>
          <div
            id="shipment-counter"
            style="
              margin-top: 30px;
              font-weight: 600;
              font-family: var(--font-accent);
            "
          >
            Shipments completed today: <span class="text-accent">512+</span>
          </div>
        </div>
      </section>

      <!-- 🚛 Booking Form Section -->
      <section id="booking-form-section" class="section">
        <div class="container">
          <div class="text-center">
            <h2 class="section-title">
              Book Your <span class="text-accent">Logistics</span>
            </h2>
            <p style="margin: 10px auto 40px; max-width: 600px">
              Fill out the details below to get an instant estimate and securely
              book your shipment across Zambia.
            </p>
          </div>

          <div class="card booking-card">
            <form id="booking-form">
              <div class="form-grid">
                <div class="form-group">
                  <label for="fullName">Full Name</label>
                  <input type="text" id="fullName" required />
                </div>
                <div class="form-group">
                  <label for="email">Email</label>
                  <input type="email" id="email" required />
                </div>
                <div class="form-group form-grid-full">
                  <label for="pickupAddress"
                    >Pickup Address (Lusaka, etc.)</label
                  >
                  <input type="text" id="pickupAddress" required />
                </div>
                <div class="form-group form-grid-full">
                  <label for="dropoffAddress"
                    >Dropoff Address (Ndola, Kitwe, etc.)</label
                  >
                  <input type="text" id="dropoffAddress" required />
                </div>
                <div class="form-group">
                  <label for="weight">Weight / Volume (KG or m³)</label>
                  <input
                    type="number"
                    id="weight"
                    required
                    min="10"
                    placeholder="e.g. 500"
                  />
                </div>
                <div class="form-group">
                  <label for="cargoType">Cargo Type</label>
                  <select id="cargoType" required>
                    <option value="">Select Type</option>
                    <option value="general">General Cargo</option>
                    <option value="perishable">Construction Materials</option>
                    <option value="equipment">Heavy Equipment</option>
                    <option value="other">Other</option>
                  </select>
                </div>
              </div>

              <div class="price-estimate">
                <p class="zmw-currency">Estimated Service Price:</p>
                <div class="price-tag" id="estimated-price">ZMW 0.00</div>
              </div>

              <button
                type="button"
                class="btn btn-primary form-grid-full"
                style="width: 100%; margin-top: 20px"
                onclick="return proceedToCheckout()"
              >
                Proceed to Payment
              </button>
            </form>
          </div>
        </div>
      </section>

      <!-- 🧱 Construction Services -->
      <section
        id="construction-services"
        class="section"
        style="background-color: var(--color-text-light)"
      >
        <div class="container">
          <div class="text-center">
            <h2 class="section-title">
              Robust <span class="text-accent">Construction</span> Services
            </h2>
            <p style="margin: 10px auto 40px; max-width: 600px">
              Leverage our fleet and expertise for your infrastructure projects.
            </p>
          </div>
          <div class="grid-4" id="service-cards-container">
            <!-- Service Card 1 -->
            <div class="card service-card service-item">
              <i
                class="fa-solid fa-hard-hat text-accent"
                style="font-size: 2rem; margin-bottom: 10px"
              ></i>
              <h3>Site Preparation</h3>
              <p style="font-size: 0.9rem">
                Efficient ground leveling, demolition, and foundational
                earthworks.
              </p>
            </div>
            <!-- Service Card 2 -->
            <div class="card service-card service-item">
              <i
                class="fa-solid fa-tractor text-accent"
                style="font-size: 2rem; margin-bottom: 10px"
              ></i>
              <h3>Equipment Rental</h3>
              <p style="font-size: 0.9rem">
                Reliable dry and wet hire of heavy machinery (excavators,
                loaders, etc.).
              </p>
            </div>
            <!-- Service Card 3 -->
            <div class="card service-card service-item">
              <i
                class="fa-solid fa-warehouse text-accent"
                style="font-size: 2rem; margin-bottom: 10px"
              ></i>
              <h3>Materials Delivery</h3>
              <p style="font-size: 0.9rem">
                Timely transport of cement, aggregate, steel, and bulk
                commodities.
              </p>
            </div>
            <!-- Service Card 4 -->
            <div class="card service-card service-item">
              <i
                class="fa-solid fa-person-digging text-accent"
                style="font-size: 2rem; margin-bottom: 10px"
              ></i>
              <h3>Project Logistics</h3>
              <p style="font-size: 0.9rem">
                Comprehensive logistical planning for large-scale construction
                sites.
              </p>
            </div>
          </div>
        </div>
      </section>

      <!-- 🌟 Why Choose Us -->
      <section id="why-choose-us" class="section">
        <div class="container">
          <h2 class="text-center section-title" style="margin-bottom: 40px">
            Why Trust <span class="text-accent">Shibalange?</span>
          </h2>
          <div class="grid-2" id="why-us-container">
            <!-- Item 1 -->
            <div class="why-us-item why-us-point">
              <div class="why-us-icon">
                <i class="fa-solid fa-clock-rotate-left"></i>
              </div>
              <div class="why-us-content">
                <strong>Efficiency & Speed</strong>
                <p style="font-size: 0.9rem">
                  Fast delivery schedules managed by modern route optimization
                  software.
                </p>
              </div>
            </div>
            <!-- Item 2 -->
            <div class="why-us-item why-us-point">
              <div class="why-us-icon">
                <i class="fa-solid fa-shield-halved"></i>
              </div>
              <div class="why-us-content">
                <strong>Reliable Fleet</strong>
                <p style="font-size: 0.9rem">
                  Modern, well-maintained vehicles ensuring minimal downtime and
                  secure transport.
                </p>
              </div>
            </div>
            <!-- Item 3 -->
            <div class="why-us-item why-us-point">
              <div class="why-us-icon">
                <i class="fa-solid fa-money-bill-transfer"></i>
              </div>
              <div class="why-us-content">
                <strong>Transparent Pricing</strong>
                <p style="font-size: 0.9rem">
                  No hidden fees. Upfront Zambian Kwacha (ZMW) estimates every
                  time.
                </p>
              </div>
            </div>
            <!-- Item 4 -->
            <div class="why-us-item why-us-point">
              <div class="why-us-icon"><i class="fa-solid fa-headset"></i></div>
              <div class="why-us-content">
                <strong>Dedicated Support</strong>
                <p style="font-size: 0.9rem">
                  Customer support available 24/7 to assist with your logistical
                  needs.
                </p>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- 📞 Contact Section -->
      <section
        id="contact-section"
        class="section"
        style="background-color: var(--color-primary)"
      >
        <div class="container">
          <div class="text-center" style="color: var(--color-text-light)">
            <h2 class="section-title" style="color: var(--color-accent)">
              Get In Touch
            </h2>
            <p style="margin: 10px auto 40px; max-width: 500px">
              Have a large-scale project? Contact our management team directly.
            </p>
          </div>
          <div class="card" id="contact-card">
            <form id="contact-form">
              <div class="form-grid">
                <div class="form-group form-grid-full">
                  <label for="contactName">Name</label>
                  <input type="text" id="contactName" required />
                </div>
                <div class="form-group form-grid-full">
                  <label for="contactEmail">Email</label>
                  <input type="email" id="contactEmail" required />
                </div>
                <div class="form-group form-grid-full">
                  <label for="message">Message</label>
                  <textarea id="message" rows="4" required></textarea>
                </div>
              </div>
              <button
                type="submit"
                class="btn btn-primary"
                style="
                  width: 100%;
                  margin-top: 20px;
                  background-color: var(--color-accent);
                  color: var(--color-primary);
                  box-shadow: none;
                "
              >
                Send Message
              </button>
            </form>
          </div>
        </div>
      </section>
    </main>

    <!-- ⚖️ Footer -->
    <footer>
      <div class="container footer-content">
        <p>
          &copy; 2025 Shibalange Enterprises Limited. All rights reserved. |
          Contact:
          <a href="mailto:management@shibaenterprise.com"
            >management@shibaenterprise.com</a
          >
        </p>
        <div class="footer-links">
          <a href="privacy.html">Privacy Policy</a> |
          <a href="terms-of-service.html">Terms of Service</a>
        </div>
      </div>
    </footer>

    <!-- Success Modal (Hidden by GSAP) -->
    <div class="modal-overlay" id="success-modal-overlay">
      <div class="modal-content" id="success-modal-content">
        <span class="modal-close" data-close="success-modal-overlay"
          >&times;</span
        >
        <i
          class="fa-solid fa-check-circle modal-icon"
          style="color: var(--color-success)"
        ></i>
        <h3 class="modal-title" id="success-modal-title">
          Thanks! Your Request Is Received.
        </h3>
        <p id="success-modal-message">
          Your cargo booking has been received. Our team will review the details
          and confirm the precise route and final payment link shortly. Your
          tracking ID is: <strong class="tracking-id">SHB-258-ZMB-947</strong>
        </p>
        <button
          class="btn btn-primary"
          data-close="success-modal-overlay"
          style="margin-top: 20px"
        >
          Close
        </button>
      </div>
    </div>

    <!-- JavaScript & GSAP Animations -->
    <script>
      // Minimal checkout iframe overlay
      function loadIframe(url, title) {
        let overlay = document.getElementById("checkoutOverlay");
        if (!overlay) {
          overlay = document.createElement("div");
          overlay.id = "checkoutOverlay";
          overlay.style.cssText =
            "position:fixed;inset:0;background:rgba(0,0,0,0.6);display:flex;align-items:center;justify-content:center;z-index:9999;";

          const container = document.createElement("div");
          container.style.cssText =
            "width:95%;max-width:1100px;height:85%;background:#fff;border-radius:10px;overflow:hidden;position:relative;";

          const closeBtn = document.createElement("button");
          closeBtn.textContent = "×";
          closeBtn.setAttribute("aria-label", "Close checkout");
          closeBtn.style.cssText =
            "position:absolute;top:8px;right:12px;font-size:28px;background:none;border:none;cursor:pointer;z-index:10001;";
          closeBtn.addEventListener("click", () => {
            const iframe = document.getElementById("checkoutIframe");
            if (iframe) iframe.src = "about:blank";
            overlay.style.display = "none";
          });

          const iframe = document.createElement("iframe");
          iframe.id = "checkoutIframe";
          iframe.src = url;
          iframe.title = title || "Checkout";
          iframe.style.cssText =
            "width:100%;height:100%;border:0;display:block;";

          container.appendChild(closeBtn);
          container.appendChild(iframe);
          overlay.appendChild(container);
          document.body.appendChild(overlay);
        } else {
          const iframe = document.getElementById("checkoutIframe");
          if (iframe) iframe.src = url;
          overlay.style.display = "flex";
        }
        return false;
      }
      document.addEventListener("DOMContentLoaded", () => {
        gsap.registerPlugin(ScrollTrigger);

        const counterElement = document
          .getElementById("shipment-counter")
          .querySelector("span");
        const totalShipments = 512;
        const counter = { value: 0 };

        // --- 1. Core GSAP Animations (Entrance & ScrollTrigger) ---

        function initGSAPAnimations() {
          // Initial page load animations (Hero section)
          gsap.set("#hero-headline, #hero-subtext, #hero-ctas, #hero-icon", {
            y: 20,
            opacity: 0,
          });
          gsap.set("#shipment-counter", { scale: 0.8, opacity: 0 });

          gsap
            .timeline()
            .to("#hero-icon", {
              y: 0,
              opacity: 1,
              duration: 0.8,
              ease: "back.out(1.7)",
            })
            .to(
              "#hero-headline",
              { y: 0, opacity: 1, duration: 0.6, ease: "power2.out" },
              "-=0.4"
            )
            .to(
              "#hero-subtext",
              { y: 0, opacity: 1, duration: 0.6, ease: "power2.out" },
              "-=0.3"
            )
            .to(
              "#hero-ctas",
              {
                y: 0,
                opacity: 1,
                duration: 0.5,
                ease: "power2.out",
                onComplete: () => {
                  // Shipments Counter Animation
                  gsap.to(counter, {
                    value: totalShipments,
                    duration: 1.5,
                    ease: "power1.out",
                    onUpdate: () => {
                      counterElement.textContent =
                        Math.ceil(counter.value) + "+";
                    },
                  });
                  gsap.to(
                    "#shipment-counter",
                    {
                      opacity: 1,
                      scale: 1,
                      duration: 0.8,
                      ease: "back.out(1.7)",
                    },
                    "-=1.5"
                  );
                },
              },
              "-=0.2"
            );

          // Hover Animations for all buttons with class .btn
          document.querySelectorAll(".btn").forEach((button) => {
            button.addEventListener("mouseenter", () => {
              gsap.to(button, {
                scale: 1.05,
                duration: 0.2,
                yoyo: true,
                repeat: 1,
                ease: "sine.inOut",
              });
            });
            button.addEventListener("mouseleave", () => {
              gsap.to(button, {
                scale: 1,
                duration: 0.3,
                ease: "back.out(1.7)",
              });
            });
          });

          // Staggered pop-in for service cards (Construction Services)
          gsap.from(".service-item", {
            opacity: 0,
            y: 50,
            scale: 0.9,
            stagger: 0.1,
            duration: 0.8,
            ease: "power3.out",
            scrollTrigger: {
              trigger: "#service-cards-container",
              start: "top 85%",
              toggleActions: "play none none none",
            },
          });

          // Fade-in on scroll for Why Choose Us points
          gsap.from(".why-us-point", {
            opacity: 0,
            x: -50,
            stagger: 0.15,
            duration: 0.7,
            ease: "power2.out",
            scrollTrigger: {
              trigger: "#why-us-container",
              start: "top 85%",
              toggleActions: "play none none none",
            },
          });
        }

        // --- 2. Modal Logic and GSAP Animation ---

        const successModalOverlay = document.getElementById(
          "success-modal-overlay"
        );
        const successModalContent = document.getElementById(
          "success-modal-content"
        );

        function openModal(overlay, content) {
          overlay.style.display = "flex";
          gsap.fromTo(overlay, { opacity: 0 }, { opacity: 1, duration: 0.3 });
          gsap.fromTo(
            content,
            { y: "100vh", opacity: 0 },
            { y: "0%", opacity: 1, duration: 0.7, ease: "power3.out" }
          );
        }

        function closeModal(overlay, content) {
          gsap
            .timeline()
            .to(content, {
              y: "50px",
              opacity: 0,
              duration: 0.4,
              ease: "power2.in",
            })
            .to(
              overlay,
              {
                opacity: 0,
                duration: 0.3,
                onComplete: () => {
                  overlay.style.display = "none";
                  // Reset modal content position for next open
                  gsap.set(content, { y: "100vh", opacity: 0 });
                },
              },
              "-=0.2"
            );
        }

        // Global close listeners (success modal only)
        document.querySelectorAll("[data-close]").forEach((closer) => {
          closer.addEventListener("click", (e) => {
            const targetId = e.target.dataset.close;
            const overlay = document.getElementById(targetId);
            if (overlay === successModalOverlay) {
              closeModal(successModalOverlay, successModalContent);
            }
          });
        });

        // No payment modal button anymore; Book Cargo scrolls to form

        // --- 3. Form Logic (AJAX Simulation) ---

        // Price Estimation Logic
        const weightInput = document.getElementById("weight");
        const cargoTypeSelect = document.getElementById("cargoType");
        const estimatedPrice = document.getElementById("estimated-price");

        function updatePriceEstimate() {
          // Quantize to fixed tiers irrespective of cargo type or weight
          const TIERS = [1300, 1400, 1800];

          // Optionally compute a provisional price (ignored for final decision)
          const weight = parseFloat(weightInput.value) || 0;
          const cargoType = cargoTypeSelect.value;
          let baseRate = 800;
          let multiplier = 2.5;
          if (cargoType === "perishable") multiplier = 3.5;
          if (cargoType === "equipment") multiplier = 4.0;
          const provisional = baseRate + weight * multiplier;

          // Map to the nearest allowed tier so only 1300, 1400, or 1800 show
          let finalPrice = TIERS.reduce((prev, curr) =>
            Math.abs(curr - provisional) < Math.abs(prev - provisional)
              ? curr
              : prev
          );

          // Display
          estimatedPrice.textContent =
            "ZMW " +
            finalPrice.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g, ",");

          return finalPrice;
        }

        weightInput.addEventListener("input", updatePriceEstimate);
        cargoTypeSelect.addEventListener("change", updatePriceEstimate);
        updatePriceEstimate(); // Initial call

        // Button handler -> open checkout iframe for the selected tier
        window.proceedToCheckout = function () {
          const finalPrice = updatePriceEstimate();
          const priceToId = {
            1300: "bb9c8bd8-1358-4a8d-8240-b632f2b2c460",
            1400: "054832b2-6772-4996-bc4e-b2c6d93596e1",
            1800: "f3b4f8ba-8be6-4262-947e-d66b8559acbc",
          };
          const id = priceToId[finalPrice] || priceToId[1800];
          const url = `https://checkout-page-frontend-development-749119130796.europe-west1.run.app/checkout?id=${encodeURIComponent(
            id
          )}`;
          return loadIframe(url, "Logistics Cost");
        };

        // Removed simulated payment confirmation; checkout handled via iframe

        // Contact Form Submission
        document
          .getElementById("contact-form")
          .addEventListener("submit", function (e) {
            e.preventDefault();

            // AJAX Simulation
            console.log("Contact form submitted.");

            // Update Success Modal for contact message
            document.getElementById("success-modal-title").textContent =
              "Message Sent!";
            document.getElementById("success-modal-message").textContent =
              "Thanks! Someone from Shibalange Enterprises Limited will reach out shortly via email. We appreciate your interest.";

            // Trigger success modal for contact form
            openModal(successModalOverlay, successModalContent);
            document.getElementById("contact-form").reset();
          });

        // Initialise all animations
        initGSAPAnimations();
      });
    </script>
    <script src="navigate.js"></script>
  </body>
</html>
